<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <link rel="stylesheet" href="/admincss/dashboard.css">
<script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>
</head>

<body style="background: #000000 ;">
  <%- include('../partials/adminheader.ejs') %>
<div class="container">
  <div class="main-panel">
    <div class="content-wrapper">
      <div class="row">
        <div class="col-12 col-sm-6 col-xl-3 grid-margin">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h4>Orders</h4>
                  <h4 class="text-white mt-3"><%=orders%></h4>
                  <h6 class="text-muted"><%=orderpers.toFixed(1)%>%  Orders achieved<span style="font-size: 80%;">(all time)</span></h6>
                </div>
                <div class="icon-box icon-box-bg-image-warning">
                  <svg class="ti-announcement gradient-card-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);"><path d="M20.664 3.478 8 8v7l.748.267-1.127 2.254a1.999 1.999 0 0 0 1.156 2.792l4.084 1.361a2.015 2.015 0 0 0 2.421-1.003l1.303-2.606 4.079 1.457A1 1 0 0 0 22 18.581V4.419a1 1 0 0 0-1.336-.941zm-7.171 16.299L9.41 18.416l1.235-2.471 4.042 1.444-1.194 2.388zM4 15h2V8H4c-1.103 0-2 .897-2 2v3c0 1.103.897 2 2 2z"></path></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3 grid-margin">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h4>Sales</h4>
                  <h4 class="text-white mt-3">₹<%=totalsale%>.00</h4>
                  <h6 class="text-muted"><%=salespers.toFixed(1)%>% Sales achieved<span style="font-size: 80%;">(all time)</span></h6>
                </div>
                <div class="icon-box icon-box-bg-image-book">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);"><path d="M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"></path></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3 grid-margin">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h4>
                    Revenue</h4>
                  <h4 class="text-white mt-3">₹<%=revenue%></h4>
                  <h6 class="text-muted"><%=revenuepers.toFixed(1)%>% Revenue generated<span style="font-size: 80%;">(all time)</span></h6>
                </div>
                <div class="icon-box icon-box-bg-image-pie">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M12 5.166V12h6.834A6.817 6.817 0 0 0 12 5.166z"></path></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3 grid-margin">
          <div class="card">
            <div class="card-body">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h4>Cost</h4>
                  <h4 class="text-white mt-3">₹<%=cost%></h4>
                  <h6 class="text-muted"><%=costpers.toFixed(1)%>% Cost came<span style="font-size: 80%;">(all time)</span></h6>
                </div>
                <div class="icon-box icon-box-bg-image-wallet">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);"><path d="M20 3H5C3.346 3 2 4.346 2 6v12c0 1.654 1.346 3 3 3h15c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM5 19c-.552 0-1-.449-1-1V6c0-.551.448-1 1-1h15v3h-6c-1.103 0-2 .897-2 2v4c0 1.103.897 2 2 2h6.001v3H5zm15-9v4h-6v-4h6z"></path></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      </div>
      <div class="row"></div>
      <div class="row"></div>
      <div class="row"></div>
    </div>
  </div>
<div class="chart">
  <canvas id="myChart" style="width:100%; max-width:910px; background: rgba(31, 31, 35, 0.8);height: 430px; padding: 10px; border-radius: 8px;"></canvas>
</div>
<div class="mt-3" style="margin-left: 2.8%;">
  <a href="/admin/salesreport/daily"><button class="btn btn-success">Daily Report</button></a>
  <a href="/admin/salesreport/weekly"><button class="btn btn-success">Weekly Report</button></a>
  <a href="/admin/salesreport/yearly"><button class="btn btn-success">Yearly Report</button></a>
</div>
</div>
<input id="delivered" type="text" value="<%=deliveredOrders%>" hidden>
<input id="shipped" type="text" value="<%=shippedOrders%>" hidden>
<input id="pending" type="text" value="<%=pendingOrders%>" hidden>
<input id="confirm" type="text" value="<%=confirmOrders%>" hidden>
<input id="cancel" type="text" value="<%=cancelOrders%>" hidden>


<script>
const delivered = document.getElementById('delivered').value
const shipped = document.getElementById('shipped').value
const pending = document.getElementById('pending').value
const confirm = document.getElementById('confirm').value
const cancel = document.getElementById('cancel').value
var xValues = ["Delivered","Confirm", "Shipped", "Pending", "Cancelled"];
var yValues = [ delivered, confirm , shipped, pending, cancel];
var barColors = ["green", "blue","orange","yellow","red"];

new Chart("myChart", {
  type: "bar",
  borderColor: 'rgb(128, 128, 237)',
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues,
    }],
  },
  
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "TOSH SALES STATS LAST 30 DAYS"
    },
  },
});

function htmlTableToExcel(type){
 var data = document.getElementById('tblToExcl');
 var excelFile = XLSX.utils.table_to_book(data);
 XLSX.write(excelFile, { bookType: type, bookSST: true, type: 'base64' });
 XLSX.writeFile(excelFile, 'ExportedFile:HTMLTableToExcel' + type);
}


</script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
</body>

</html>